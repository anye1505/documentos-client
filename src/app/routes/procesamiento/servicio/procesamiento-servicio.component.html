<toaster-container [toasterconfig]="toasterconfig"></toaster-container>
<!--<div class="content-heading">
    Procesamiento
    <small></small>
</div>-->
<div class="panel panel-default">
    <div class="panel-heading">
        <div class="panel-title">Orden de Servicio</div>
    </div>
    <div class="panel-body">
        <div class="row">
            <form  [formGroup]="valFormSearch" (submit)="submitFormSearch($event, valFormSearch.value)"   class=" form-horizontal col-sm-12 ">
            <!--<form  [formGroup]="valFormSearch" (submit)="fn_busquedamultiple()"   class=" form-horizontal col-sm-12 ">-->
                <div class="row">
                    <div class="col-sm-4">                    
                        <div class="form-group">
                            <label class="col-sm-6 control-label">OS Operador</label>
                            <div class="col-sm-6">
                                <input class="form-control input-sm" type="text" formControlName="pro_orden_operador" [formControl]="valFormSearch.controls['pro_orden_operador']" />
                                
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">                    
                        <div class="form-group">
                            <label class="col-sm-6 control-label">Nro. OS</label>
                            <div class="col-sm-6">
                                <input class="form-control input-sm" type="text" formControlName="pro_nro_orden_courier" [formControl]="valFormSearch.controls['pro_nro_orden_courier']" />
                                
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Estado</label>
                            <div class="col-sm-9">                            
                                <select class="form-control input-sm" formControlName="estado" [formControl]="valFormSearch.controls['estado']">
                                    <option value="">SELECCIONAR</option>
                                    <option *ngFor="let estado of estados" value="{{estado.ode_id}}">{{estado.ode_nombre}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">                    
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Operador</label>
                            <div class="col-sm-8">                                
                                <ng-select            
                                                        
                                        bindLabel="emp_abrev"
                                        bindValue="emp_id"
                                        [items]="empresas"
                                        [multiple]="false"
                                        [closeOnSelect]="true"
                                        placeholder="Seleccionar Sub cliente"
                                        formControlName="operador" 
                                        [formControl]="valFormSearch.controls['operador']"
                                            (change)="searchCliente($event)"
                                    >
                                </ng-select> 
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">                    
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Cliente</label>
                            <div class="col-sm-8">                                
                                <ng-select                      
                                        bindLabel="emp_abrev"
                                        bindValue="cli_id"
                                        [items]="clientes"
                                        [multiple]="false"
                                        [closeOnSelect]="true"
                                        placeholder="Seleccionar Sub cliente"
                                        formControlName="cliente" 
                                        [formControl]="valFormSearch.controls['cliente']"
                                    >
                                </ng-select> 
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6">                    
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Fecha Proceso Desde</label>
                            <div class="col-sm-8">
                                <input class="form-control input-sm" type="date" formControlName="desde" [formControl]="valFormSearch.controls['desde']" />
                                <span class="text-danger" *ngIf="valFormSearch.controls['desde'].hasError('date') && (valFormSearch.controls['desde'].dirty || valFormSearch.controls['desde'].touched)">Enter a valid date</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">                    
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Hasta</label>
                            <div class="col-sm-8">
                                <input class="form-control input-sm" type="date" formControlName="hasta" [formControl]="valFormSearch.controls['hasta']" />
                                <span class="text-danger" *ngIf="valFormSearch.controls['hasta'].hasError('date') && (valFormSearch.controls['hasta'].dirty || valFormSearch.controls['hasta'].touched)">Enter a valid date</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-3 col-sm-offset-9">
                        <input [disabled]="loading" type="submit" class="btn btn-primary " style="float:right;" value="Buscar"/>
                    </div>
                </div>
            </form>
        </div>
        <hr />
        <div class="row">
            <div class="col-sm-12">
                <button class="btn btn-primary" (click)="cargarBase()" ><i class="icon icon-list" ></i> Cargar base</button>                
                <button class="btn btn-danger" (click)="generarOP()"  ><i class="icon icon-plus" ></i> Generar OS</button>
                <button class="btn btn-warning" (click)="descargarSimVarios()"  [disabled]="!btnDescargarSim "><i class="icon icon-cloud-download"></i> Descargar base SIM</button>
                <button class="btn btn-warning" (click)="reporte()"  [disabled]="!btnReporte "><i class="icon icon-cloud-download"></i> Reporte</button>
            </div>
            <div class="col-sm-12 text-right">
                <button [disabled]="loading" type="button" class="btn btn-primary" (click)="btnExportar_click($event)">Exportar Excel</button>
            </div>
        </div>
        <ngx-datatable  #table class='bootstrap no-detail-row' [columns]="columns" [columnMode]="'force'" [footerHeight]="50" [rowHeight]="'auto'" [limit]="limit" [rows]='rows' (page)="onPage($event)" (sort)="onSort($event)"  [externalPaging]="true" [count]="count"  
                [externalSorting]="true" [loadingIndicator]="loading" 
                [selected]="selected" [selectionType]="'multi'" (activate)="onActivate($event)" (select)='onSelect($event)' [reorderable]="false"

            >

                <ngx-datatable-column prop="ord_id" [sortable]="false" >

                    <ng-template let-column="column" ngx-datatable-header-template>
                    <input type="checkbox" (change)="allCheckbox($event)"  [(ngModel)]="chkList" #ctrl="ngModel" />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    ID
                    </ng-template>

                      <ng-template let-row="row" let-value="value" ngx-datatable-cell-template  let-group="group">
                            
                        <input type="checkbox" id="chkTable"  class="chkTable"  (change)="onCheckboxChangeFn($event,row)" [checked]="checkedTotal" [value]=value/>
                        &nbsp;
                        <label [ngClass]="getClassColor(row) " class="label-ball"></label>
                         &nbsp;{{row.ord_id}}
                      </ng-template> 

                </ngx-datatable-column>


                <!--<ngx-datatable-column prop="pro_fecha_inicio_ord"  [sortable]="true">-->
                <ngx-datatable-column prop="pro_fecha_fin_ord"  [sortable]="true"><!--Anyelys-->
                    <ng-template let-column="column" ngx-datatable-header-template>
                    Fecha <br> Carga
                    </ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                    {{value}}<!-- | date: 'dd/MM/yyyy'-->
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column prop="pro_fecha_op_courier"  [sortable]="true">
                    <ng-template let-column="column" ngx-datatable-header-template>
                    Fecha Proceso
                    </ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                    {{value}}
                    </ng-template>
                </ngx-datatable-column>

                <!--<ngx-datatable-column prop="configuracion.empresa.emp_abrev" name="Operador" [sortable]="false"></ngx-datatable-column>-->

                <ngx-datatable-column prop="ope_nombre" name="Operador" [sortable]="false"></ngx-datatable-column><!--Anyelys-->
                <!--<ngx-datatable-column prop="operador.emp_abrev" name="Operador" [sortable]="false"></ngx-datatable-column>anterior a cambio de anyelys-->

                <ngx-datatable-column prop="pro_orden_operador" name="OS <br>  Operador" [sortable]="false"></ngx-datatable-column>
                <ngx-datatable-column prop="pro_nro_orden_courier" name="Nro  <br>  de OS" [sortable]="false" [cellClass]="'cells-align-right'"></ngx-datatable-column>
                <ngx-datatable-column prop="emp_nombre" name="Cliente" [sortable]="false"></ngx-datatable-column><!--Anyelys-->
                <ngx-datatable-column prop="prd_nombre" name="Producto" [sortable]="false"></ngx-datatable-column>
                <!--<ngx-datatable-column prop="producto.cliente.cliente.emp_abrev" name="Cliente" [sortable]="false"></ngx-datatable-column>
                <ngx-datatable-column prop="producto.prd_nombre_docs" name="Producto" [sortable]="false"></ngx-datatable-column>-->

<!--
            <ngx-datatable-column prop="pro_nombre_archivo_in" name="Archivo"  [sortable]="false"></ngx-datatable-column>

            <ngx-datatable-column prop="pro_nro_orden_courier" name="Nro de OS" [sortable]="false"></ngx-datatable-column>-->
            <ngx-datatable-column prop="ode_nombre" name="Estado" [sortable]="false"></ngx-datatable-column><!--anyelys-->
            <ngx-datatable-column prop="pro_nombre_archivo_in" name="Nombre <br> Journal" [sortable]="false" [flexGrow]="3" [minWidth]="200"></ngx-datatable-column>
            <!--<ngx-datatable-column prop="ordenEstado.ode_nombre" name="Estado" [sortable]="false"></ngx-datatable-column>-->
            <ngx-datatable-column prop="tipo_archivo" name="Tipo de <br> Archivo" [sortable]="false"></ngx-datatable-column>
            
            <ngx-datatable-column prop="pro_nro_docs" name="Total  <br>  Docs" [sortable]="false" [cellClass]="'cells-align-right'"></ngx-datatable-column>
            

            <ngx-datatable-column name="" sortable="false" prop="ord_id" >
                      <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                            <button class="btn btn-primary btn-xs" (click)="generarEtiqueta(row)"  [hidden]="row.ode_id < 7 " tooltip="Generar Etiqueta" ><i class="icon icon-plus" ></i></button>
                            <br> <br>
                            
                            <button class="btn btn-purple btn-xs" (click)="descargar(2,row)" [hidden]="row.ode_id <= 7|| row.ope_id==23"  tooltip="Descargar cargo"><i class="fa fa-newspaper-o"></i> </button>

                            <button class="btn btn-purple  btn-xs" (click)="descargar(5,row)"  [hidden]="row.tet_id <  1 || row.tet_id == null" tooltip="Descargar Etiqueta"><i class="fa fa-barcode"></i> </button>

                            <button class="btn btn-purple  btn-xs" (click)="descargarSim(row.ord_id)"  [hidden]="row.ode_id < 7"  tooltip="Descargar SIM" ><i class="fa fa-file-text-o"></i> </button>

                            <button class="btn btn-danger  btn-xs" (click)="eliminar(row)" tooltip="Eliminar" ><i class="fa fa-trash"></i> </button>

                      </ng-template> 
            </ngx-datatable-column>

            <ngx-datatable-footer>
                <ng-template 
                    ngx-datatable-footer-template
                    let-rowCount="rowCount"
                    let-pageSize="pageSize"
                    let-selectedCount="selectedCount"
                    let-curPage="curPage"
                    let-offset="offset"
                    let-isVisible="isVisible">
                    <div class="page-count">
                        <span *ngIf="selectedMessage">
                            {{selectedCount.toLocaleString()}} {{selectedMessage}} / 
                        </span>
                        <strong>{{rowCount.toLocaleString()}} Total</strong>

                        <div class="ball-clip-rotate" style="height:20px;float:right;margin-top: 10px;"  [ngClass]="{hidden : loading !== true }">
                            <div>
                                
                            </div>
                        </div>
                    </div>
                    <datatable-pager
                      [pagerLeftArrowIcon]="'datatable-icon-left'"
                      [pagerRightArrowIcon]="'datatable-icon-right'"
                      [pagerPreviousIcon]="'datatable-icon-prev'"
                      [pagerNextIcon]="'datatable-icon-skip'"
                      [page]="curPage"
                      [size]="pageSize"
                      [count]="rowCount"
                      [hidden]="!((rowCount / pageSize) > 1)"
                      (change)="table.onFooterPage($event)">
                    </datatable-pager>
                </ng-template>
            </ngx-datatable-footer>
        </ngx-datatable>    
    </div>
</div>

<!--Nuevo #modalCargarBase por cada select option - Anyelys Escalona-->
<div class="modal fade " data-keyboard="false" bsModal #modalCargarBase="bs-modal"  role="dialog" aria-labelledby="modalCargarBase" aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-lg " style="width:1325px !important">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Cargar Base</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalCargarBasehide()" [disabled]="formLoading">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="row"> 
                    <div class="card" role="tabpanel">
                        <ul class="nav nav-tabs nav-fill" role="tablist">
                            <!--<li class="nav-item" [ngClass]="{'active':selectab==0}" role="presentation">
                                <a class="nav-link" [ngClass]="{'show':selectab==0}" href="javascript:void(0);" (click)="selectedtab(0);" aria-controls="home" role="tab" data-toggle="tab" aria-selected="true">
                                <em class="far fa-clock fa-fw"></em>DATAIMAGENES</a>
                            </li>-->
                            <li class="nav-item" [ngClass]="{'active':selectab==1}" role="presentation">
                                <a class="nav-link" [ngClass]="{'show':selectab==1}" href="javascript:void(0);" (click)="selectedtab(1);" aria-controls="profile" role="tab" data-toggle="tab" aria-selected="false">
                                <em class="far fa-money-bill-alt fa-fw"></em>ENOTRIA</a>
                            </li>
                            <li class="nav-item" [ngClass]="{'active':selectab==2}" role="presentation">
                                <a class="nav-link" [ngClass]="{'show':selectab==2}" href="javascript:void(0);" (click)="selectedtab(2);" aria-controls="profile" role="tab" data-toggle="tab" aria-selected="false">
                                <em class="far fa-money-bill-alt fa-fw"></em>DOCUMENTOS</a>
                            </li>
                        </ul>
                        <div class="tab-content" style="padding: 10px 20px 0px 20px;">
                            <!--DATAIMAGENES
                            <div class="tab-pane" [ngClass]="{'active show':selectab==0}" role="tabpanel">
                                <div class="col-sm-12">
                                    <div class="form-horizontal">
                                        <div class="form-group" [formGroup]="valFormFecha">
                                            <label class="control-label" class="col-sm-2">Fecha servicio dataimagenes</label>                                    
                                            <div class="form-group col-sm-8">
                                                <input class="form-control input-sm" type="date" formControlName="fecha" [formControl]="valFormFecha.controls['fecha']" />
                                                <span class="text-danger" *ngIf="valFormFecha.controls['fecha'].hasError('date') && (valFormFecha.controls['fecha'].dirty || valFormFecha.controls['fecha'].touched)">Enter a valid date</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4"></div>
                                            <div class="col-sm-4">
                                                <label for="file2" class="file-upload">
                                                    <button class="btn btn-primary btn-block">Seleccionar Archivo Taylor</button>
                                                    <input id="file2" type="file" ng2FileSelect [uploader]="uploader" />
                                                </label>
                                            </div>
                                            <div class="col-sm-4"></div>
                                        </div>
                                    
                                        <div class="form-group">
                                        <div class="col-sm-12" style="margin-bottom: 40px; overflow-x: auto !important;">
                                            <table class="table table-responsive">
                                                <thead>
                                                <tr>
                                                    <th>Nombre</th>
                                                    <th>Tamaño</th>
                                                    <th>Estado</th>
                                                    <th>Acción</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let item of uploader.queue">
                                                    <td><strong>{{ item?.file?.name }}</strong></td>
                                                    <td  nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                                                
                                                    <td class="text-center">
                                                        <span *ngIf="item.isSuccess"><i class="btn btn-xs btn-success icon icon-check"></i></span>
                                                        <span *ngIf="item.isCancel"><i class="btn btn-xs btn-warning icon icon-close"></i></span>
                                                        <span *ngIf="item.isError"><i class="btn btn-xs btn-danger icon icon-close"></i></span>
                                                    </td>
                                                    <td nowrap>
                                                        <button type="button" class="btn btn-success btn-xs"
                                                                (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                                            <span class="icon icon-cloud-upload"></span> Subir
                                                        </button>
                                                        <button type="button" class="btn btn-danger btn-xs"
                                                                (click)="cancelUpload(item,true)">
                                                            <span class="icon icon-trash"></span> Cancelar
                                                        </button>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                
                                            <div>
                                                <div>
                                                    
                                                    <div class="progress">
                                                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                            <!--ENOTRIA-->
                            <div class="tab-pane" [ngClass]="{'active show':selectab==1}" role="tabpanel">
                                <div class="row"><!--<div class="col-sm-12">-->
                                    <div class="form-horizontal">                                        
                                        <!--Archivo journal-->
                                        <div class="form-group">
                                            <div class="col-sm-4"></div>
                                            <div class="col-sm-4">
                                                <label for="file2" class="file-upload">
                                                    <button class="btn btn-primary btn-block">Seleccionar Archivo JOURNAL</button>
                                                    <input id="file2" type="file" ng2FileSelect [uploader]="uploader" multiple />
                                                </label>
                                            </div>
                                            <div class="col-sm-4"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12" style="margin-bottom: 40px;">
                                        <table class="table tablewrap">
                                            <thead>
                                            <tr>
                                                <th width="30%">Nombre</th>
                                                <th>Tamaño</th>
                                                <th>Cantidad</th>
                                                <th>OS</th>
                                                <th>Estado</th>
                                                <th>Obervación</th>
                                                <th>Acción</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let item of uploader.queue">
                                                <td><strong>{{ item?.file?.name }}</strong></td>
                                                <td  nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                                                <td *ngIf="response.length > 0 && item?.response">{{item?.response[0].cantidad}}</td>
                                                <td *ngIf="response.length == 0 || !item?.response"></td>
                                                <td *ngIf="response.length > 0 && item?.response">{{item?.response[0].os}}</td>
                                                <td *ngIf="response.length == 0 || !item?.response"></td>
                                                <td class="text-center">
                                                    
                                                    <span *ngIf="item.isSuccess"><i class="btn btn-xs btn-success icon icon-check"></i></span>
                                                    <span *ngIf="item.isCancel"><i class="btn btn-xs btn-warning icon icon-close"></i></span>
                                                    <span *ngIf="item.isError"><i class="btn btn-xs btn-danger icon icon-close"></i></span>
                                                </td>
                                                <td *ngIf="response.length > 0 && item?.response">{{item?.response[0].mensaje}}</td>
                                                <td *ngIf="response.length == 0 || !item?.response"></td>
                                                <td nowrap>
                                                    <button type="button" class="btn btn-success btn-xs"
                                                            (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess || formLoading">
                                                        <span class="icon icon-cloud-upload"></span> Subir
                                                    </button>
                                                    <button type="button" class="btn btn-danger btn-xs"
                                                            (click)="cancelUpload(item,true)">
                                                        <span class="icon icon-trash"></span> Cancelar
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <div>
                                            <div>
                                                
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div *ngIf="uploader.queue.length > 1">
                                            <button type="button" class="btn btn-primary btn-xs pull-right"
                                                (click)="upload()" [disabled]="uploader.queue.length == 0 || formLoading || cont == uploader.queue.length">
                                                <span class="icon icon-cloud-upload"></span> Subir todo
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <!--DOCUMENTOS-->
                            <div class="tab-pane" [ngClass]="{'active show':selectab==2}" role="tabpanel">
                                <div class="row"><!--<div class="col-sm-12">-->
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-sm-offset-2 col-sm-12">
                                                <div class="form-group">
                                                    <label class="control-label text-center" >Descargue la plantilla en formato Documentos, complete los datos  y cargue el archivo</label>
                                                    <button class="btn btn-xs bg-green-dark" (click)="descargarExcel()" tooltip="Descargar" placement="top">
                                                        <i class="fa fa-download"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="form-horizontal">                                        
                                        <!--Archivo documentos-->
                                        <div class="form-group">
                                            <div class="col-sm-4"></div>
                                            <div class="col-sm-4">
                                                <label for="file2" class="file-upload">
                                                    <button class="btn btn-primary btn-block">Seleccionar Archivo DOCUMENTOS</button>
                                                    <input id="file2" type="file" ng2FileSelect [uploader]="uploader" />
                                                </label>
                                            </div>
                                            <div class="col-sm-4"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12" style="margin-bottom: 40px; overflow-x: auto !important;">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th width="50%">Nombre</th>
                                                <th>Tamaño</th>
                                                <th>Cantidad</th>
                                                <th>OS</th>
                                                <th>Estado</th>
                                                <th width="150px">Acción</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let item of uploader.queue">
                                                <td><strong>{{ item?.file?.name }}</strong></td>
                                                <td  nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                                                <td *ngIf="response.length > 0 && item?.response">{{item?.response[0].cantidad}} </td>
                                                <td *ngIf="response.length > 0 && item?.response">{{item?.response[0].os}} </td>
                                                <td class="text-center">
                                                    <span *ngIf="item.isSuccess"><i class="btn btn-xs btn-success icon icon-check"></i></span>
                                                    <span *ngIf="item.isCancel"><i class="btn btn-xs btn-warning icon icon-close"></i></span>
                                                    <span *ngIf="item.isError"><i class="btn btn-xs btn-danger icon icon-close"></i></span>
                                                </td>
                                                <td nowrap>
                                                    <button type="button" class="btn btn-success btn-xs"
                                                            (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                                        <span class="icon icon-cloud-upload"></span> Subir
                                                    </button>
                                                    <button type="button" class="btn btn-danger btn-xs"
                                                            (click)="cancelUpload(item,true)">
                                                        <span class="icon icon-trash"></span> Cancelar
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                            
                                        <div>
                                            <div>
                                                
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>

                    </div>                    
                </div>
            </div>
        </div>
    </div>
</div>
<!--Fin #modalCargarBase-->

<!--<ng-template #modalCargarBase>-->

<!--<div class="modal fade " bsModal #modalCargarBase="bs-modal"  role="dialog" aria-labelledby="modalCargarBase" aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Cargar Base</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalCargarBase.hide()" [disabled]="formLoading">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="row">            
                    <div class="col-sm-12">
                        <div class="form-horizontal"> 
                            <div class="form-group">
                                <label class="control-label" class="col-sm-2">Formato</label>
                                <div class="col-sm-10">
                                    <ng-select
                                            [items]="formatos"
                                            [(ngModel)]="formFormatos" #ctrl="ngModel"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            bindLabel="tif_nombre"
                                            bindValue="tif_id"
                                            placeholder="Seleccionar formato"
                                        >
                                    </ng-select> 
                                </div>
                            </div>
                            -->
                            <!--
                            <div class="form-group">
                                <label class="control-label" class="col-sm-2">Sucursal</label>
                                <div class="col-sm-10">
                                    <ng-select
                                            [items]="sucursales"
                                            [(ngModel)]="formSucursal" #ctrl="ngModel"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            bindLabel="suc_nombre"
                                            bindValue="suc_id"
                                            placeholder="Seleccionar Sucursal"
                                        >
                                    </ng-select> 
                                </div>
                            </div>
                        -->
                        <!--
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label for="file2" class="file-upload">
                                        <button class="btn btn-primary btn-block">Seleccionar Archivo</button>
                                        <input id="file2" type="file" ng2FileSelect [uploader]="uploader" />
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-12" style="margin-bottom: 40px">
                        <table class="table">
                            <thead>
                            <tr>
                                <th width="50%">Name</th>
                                <th>Tamaño</th>
                                <th>Status</th>
                                <th>Acción</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let item of uploader.queue">
                                <td><strong>{{ item?.file?.name }}</strong></td>
                                <td  nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                               
                                <td class="text-center">
                                    <span *ngIf="item.isSuccess"><i class="btn btn-xs btn-success icon icon-check"></i></span>
                                    <span *ngIf="item.isCancel"><i class="btn btn-xs btn-warning icon icon-close"></i></span>
                                    <span *ngIf="item.isError"><i class="btn btn-xs btn-danger icon icon-close"></i></span>
                                </td>
                                <td nowrap>
                                    <button type="button" class="btn btn-success btn-xs"
                                            (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                        <span class="icon icon-cloud-upload"></span> Subir
                                    </button>
                                    -->
                                    <!--
                                    <button type="button" class="btn btn-warning btn-xs"
                                            (click)="cancelUpload(item,false)" [disabled]="!item.isUploading">
                                        <span class="glyphicon glyphicon-ban-circle"></span> Cancelar
                                    </button>-->
                                    <!--
                                    <button type="button" class="btn btn-danger btn-xs"
                                            (click)="cancelUpload(item,true)">
                                        <span class="icon icon-trash"></span> Cancelar
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
              
                        <div>
                            <div>
                                
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                </div>
                            </div>
                            -->
                           <!--
                            <button type="button" class="btn btn-success btn-s"
                                    (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
                                <span class="glyphicon glyphicon-upload"></span> Upload all
                            </button>
                            <button type="button" class="btn btn-warning btn-s"
                                    (click)="uploader.cancelAll()" [disabled]="!uploader.isUploading">
                                <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
                            </button>
                            <button type="button" class="btn btn-danger btn-s"
                                    (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
                                <span class="glyphicon glyphicon-trash"></span> Remove all
                            </button>
                        -->
                        <!--
                        </div>
                    </div>
                    -->

                    <!--


                    <form id="formCrearOp" [formGroup]="valFormCrearOp" (submit)="submitFormCrearOp($event, valFormCrearOp.value)"   class="col-sm-12">
                        <div class="form-group">
                            <label>Cliente:</label>
                            <input type="text" name="cliente" class="form-control" [formControl]="valFormCrearOp.controls['cliente']"   />
                            <span class="text-danger" *ngIf="valFormCrearOp.controls['cliente'].hasError('required') && (valFormCrearOp.controls['cliente'].dirty || valFormCrearOp.controls['cliente'].touched)">Seleccionar cliente</span>
                        </div>
                        <div class="form-group">
                            <label>Archivo:</label>
                            <input type="text" name="surname" class="form-control"  [formControl]="valFormCrearOp.controls['surname']" />
                            
                            <span class="text-danger" *ngIf="valFormCrearOp.controls['surname'].hasError('required') && (valFormCrearOp.controls['surname'].dirty || valFormCrearOp.controls['surname'].touched)">Apellido es obligatorio</span>
                            <span class="text-danger" *ngIf="valFormCrearOp.controls['surname'].hasError('pattern') && (valFormCrearOp.controls['surname'].dirty || valFormCrearOp.controls['surname'].touched)">Solo se aceptan letras</span>
                        </div>
                    </form>

                    -->
                    <!--
                </div>
            </div>
        </div>
    </div>
</div>
-->
<!--</ng-template>-->

<!--<ng-template #modalGenerarOp>-->
<div class="modal fade " bsModal #modalGenerarOp="bs-modal"  role="dialog" aria-labelledby="modalGenerarOp" aria-hidden="true" (onHidden)="hiddenModalGenerarOp()" [config]="{backdrop: 'static'}">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Generar OS</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalGenerarOp.hide()" [disabled]="formLoading">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
         
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <form id="formGenerarOP" class="form-horizontal" [formGroup]="formCrearOp" (submit)="submitFormGenerarOP($event, formCrearOp.value)"  >
                            <div class="form-group">
                                <label class="control-label col-sm-2" >Operador</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control input-sm" formControlName="operador" [formControl]="formCrearOp.controls['operador']" />
                                </div>
                            </div>
<!--
                            <div class="form-group">
                                <label class="control-label" class="col-sm-2">Sucursal</label>
                                <div class="col-sm-10">
                                    <ng-select
                                            [items]="sucursales"
                                             formControlName="sucursal" 
                                            [formControl]="formCrearOp.controls['sucursal']"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            bindLabel="suc_nombre"
                                            bindValue="suc_id"
                                            placeholder="Seleccionar Sucursal"
                                        >
                                    </ng-select> 
                                    <span class="text-danger" *ngIf="formCrearOp.controls['sucursal'].hasError('required') && (formCrearOp.controls['sucursal'].dirty || formCrearOp.controls['sucursal'].touched)">Sucursal es obligatorio</span>
                                </div>
                            </div>
-->
                            <div class="form-group">
                                <label class="control-label col-sm-2">Archivo</label>
                                <div class="col-sm-10">
                                    <input  type="text" class="form-control input-sm" formControlName="archivo" [formControl]="formCrearOp.controls['archivo']" />
                                </div>
                            </div>
                            <div class="row">                        
                                <div class="col-sm-4">                            
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Nro. OP</label>
                                        <div class="col-sm-8">
                                            <input  type="text" class="form-control input-sm" formControlName="nroOp" [formControl]="formCrearOp.controls['nroOp']"/>
                                            <span class="text-danger" *ngIf="formCrearOp.controls['nroOp'].hasError('pattern') && (formCrearOp.controls['nroOp'].dirty || formCrearOp.controls['nroOp'].touched)">Solo se aceptan Números</span>
                                        </div>
                                    </div>
                                </div>                   
                                <div class="col-sm-4">                            
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Nro. Doc</label>
                                        <div class="col-sm-8">
                                            <input  type="text" class="form-control input-sm" formControlName="nroDocumentos" [formControl]="formCrearOp.controls['nroDocumentos']"/>
                                        </div>
                                    </div>
                                </div>            
                                <div class="col-sm-4">                            
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Fecha corte</label>
                                        <div class="col-sm-8">
                                            <input  type="text" class="form-control input-sm" formControlName="fechaCorte" [formControl]="formCrearOp.controls['fechaCorte']"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-2">Cliente</label>
                                <div class="col-sm-10">
                                    
                                    <ng-select            
                                             
                                            bindLabel="emp_abrev"
                                            bindValue="cli_id"
                                            [items]="clientes"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            placeholder="Seleccionar Sub cliente"
                                            formControlName="cliente" 
                                            [formControl]="formCrearOp.controls['cliente']"
                                            (change)="cargarProd($event)"
                                        >
                                    </ng-select> 
                                    <!--<select class="form-control" formControlName="cliente" [formControl]="formCrearOp.controls['cliente']">
                                        <option *ngFor="let cliente of clientes" value="{{cliente.cli_id}}" (change)="cargarProd($event)">{{cliente.emp_abrev}}</option>
                                    </select>-->
                                    <span class="text-danger" *ngIf="formCrearOp.controls['cliente'].hasError('required') && (formCrearOp.controls['cliente'].dirty || formCrearOp.controls['cliente'].touched)">Subcliente es obligatorio</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">Producto</label>
                                <div class="col-sm-10">   
                                        <ng-select            
                                        bindLabel="prd_nombre_docs"
                                        bindValue="prd_id"
                                        [items]="productos"
                                        [multiple]="false"
                                        [closeOnSelect]="true"
                                        placeholder="Seleccionar Productos"
                                        formControlName="producto" 
                                        [formControl]="formCrearOp.controls['producto']"
                                    >
                                </ng-select>                         
                                    <!--<ng-select            
                                            bindLabel="prd_nombre_docs"
                                            bindValue="prd_id"
                                            [items]="productos"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            placeholder="Seleccionar Productos"
                                            formControlName="producto" 
                                            (change)="selectProducto($event)"
                                            [formControl]="formCrearOp.controls['producto']"
                                        >
                                    </ng-select> 

                                    <select class="form-control" formControlName="producto" [formControl]="formCrearOp.controls['producto']">
                                        <option *ngFor="let producto of productos" value="{{producto.prd_id}}">{{producto.prd_nombre_docs}}</option>
                                    </select>-->
                                    <span class="text-danger" *ngIf="formCrearOp.controls['producto'].hasError('required') && (formCrearOp.controls['producto'].dirty || formCrearOp.controls['producto'].touched)">producto es obligatorio</span>
                                </div>
                            </div>  
                            <div class="form-group">
                                <label class="control-label col-sm-4">Modelo Distribución</label>
                                <div class="col-sm-8">                            
                                    <span *ngIf="selectedProducto">{{selectedProducto.modeloDistribucion?selectedProducto.modeloDistribucion.mdi_nombre:''}}</span>
                                </div>
                            </div>  
                            <div class="form-group">
                                <label class="control-label col-sm-4">Modelo de cargo</label>
                                <div class="col-sm-8">                            
                                    <span *ngIf="selectedProducto">{{selectedProducto.tipoCargo?selectedProducto.tipoCargo.tca_nombre:''}}</span>
                                </div>
                            </div>  
                            <div class="form-group">
                                <label class="control-label col-sm-4">Regla Distribución</label>
                                <div class="col-sm-8">                            
                                    <span *ngIf="selectedProducto">{{selectedProducto.reglaDistribucion?selectedProducto.reglaDistribucion.rdi_nombre:''}}</span>
                                </div>
                            </div>  
                            <div class="pane panel-default">                        
                                <div class="panel-heading">
                                    <div class="panel-title">Condiciones</div>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-12">                                            
                                            <div class="form-group">
                                                <label class="control-label col-sm-4">Fecha Ordenamiento</label>
                                                <div class="col-sm-8">
                                                    <input type="text"  class="form-control input-sm"  formControlName="fechaOrdenamiento" [formControl]="formCrearOp.controls['fechaOrdenamiento']" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">                                    
                                        <div class="col-sm-12">                                            
                                            <div class="form-group">
                                                <label class="control-label col-sm-4">Fecha Proceso</label>
                                                <div class="col-sm-8">
                                                    <input type="date" class="form-control input-sm"  formControlName="fechaInicio" [formControl]="formCrearOp.controls['fechaInicio']" />
                                                    <small >(*) La distribución comienza al día siguiente</small>
                                                    <br>
                                                    <span class="text-danger" *ngIf="formCrearOp.controls['fechaInicio'].hasError('required') && (formCrearOp.controls['fechaInicio'].dirty || formCrearOp.controls['fechaInicio'].touched)">Fecha proceso es obligatorio</span>
                                                    <br>
                                                    <span class="text-danger" *ngIf="formCrearOp.controls['fechaInicio'].hasError('date') && (formCrearOp.controls['fechaInicio'].dirty || formCrearOp.controls['fechaInicio'].touched)">fecha erronea</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!--
                                        <div class="col-sm-6">                                            
                                            <div class="form-group">
                                                <label class="control-label col-sm-5">Nro. de días</label>
                                                <div class="col-sm-7">
                                                    <input type="number" class="form-control input-sm"  formControlName="nroDias" [formControl]="formCrearOp.controls['nroDias']" />
                                                    <span class="text-danger" *ngIf="formCrearOp.controls['nroDias'].hasError('required') && (formCrearOp.controls['nroDias'].dirty || formCrearOp.controls['nroDias'].touched)">Nro. de días es obligatorio</span>
                                                    <span class="text-danger" *ngIf="formCrearOp.controls['nroDias'].hasError('pattern') && (formCrearOp.controls['nroDias'].dirty || formCrearOp.controls['nroDias'].touched)">Solo se aceptan Números</span>
                                                </div>
                                            </div>
                                        </div>-->
                                    </div>

                                    <!--
                                    <div class="form-group">
                                        <label class="control-label col-sm-2">Fecha fin</label>
                                        <div class="col-sm-10">
                                            <input type="date" class="form-control input-sm"  formControlName="fechaFin" [formControl]="formCrearOp.controls['fechaFin']" />
                                            <span class="text-danger" *ngIf="formCrearOp.controls['fechaFin'].hasError('required') && (formCrearOp.controls['fechaFin'].dirty || formCrearOp.controls['fechaFin'].touched)">Fecha fin es obligatorio</span>
                                            <span class="text-danger" *ngIf="formCrearOp.controls['fechaFin'].hasError('date') && (formCrearOp.controls['fechaFin'].dirty || formCrearOp.controls['fechaFin'].touched)">fecha erronea</span>
                                        </div>
                                    </div>
                                -->
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Imprimir mensaje en el cargo</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control input-sm"  formControlName="ord_mensaje_cargo" [formControl]="formCrearOp.controls['ord_mensaje_cargo']" />
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="ball-clip-rotate" style="height:20px;float:left;" [ngClass]="{hidden : formLoading !== true }">
                    <div></div>
                </div>
                <button [disabled]="formLoading"  form="formGenerarOP" class="btn btn-primary">Generar</button>
            </div>
        </div>
    </div>
</div>
<!--</ng-template>-->

<!--<ng-template #modalGenerarOp>-->
<div data-keyboard="false" class="modal fade " bsModal #modalGenerarOpVarios="bs-modal"  role="dialog" aria-labelledby="modalGenerarOpVarios" aria-hidden="true"  [config]="{backdrop: 'static'}">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Generar OS</h4>
                <button [disabled]="formLoading" type="button" class="close pull-right" aria-label="Close" (click)="modalGenerarOpVarioscerrar()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
         
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <form id="formGenerarOPVarios" class="form-horizontal" [formGroup]="formCrearOpVarios" (submit)="submitFormGenerarOPVarios($event, formCrearOpVarios.value)"  >                            
                            <div class="pane panel-default">                        
                                <div class="panel-heading">
                                    <div class="panel-title">Condiciones</div>
                                </div>
                                <div class="panel-body">
                                    <div class="row">                                    
                                        <div class="col-sm-12">                                            
                                            <div class="form-group">
                                                <label class="control-label col-sm-4">Fecha Proceso</label>
                                                <div class="col-sm-8">
                                                    <input type="date" class="form-control input-sm"  formControlName="fechaInicio" [formControl]="formCrearOpVarios.controls['fechaInicio']" />
                                                    <small >(*) La distribución comienza al día siguiente</small>
                                                    <br>
                                                    <span class="text-danger" *ngIf="formCrearOpVarios.controls['fechaInicio'].hasError('required') && (formCrearOpVarios.controls['fechaInicio'].dirty || formCrearOpVarios.controls['fechaInicio'].touched)">Fecha inicio es obligatorio</span>
                                                    <br>
                                                    <span class="text-danger" *ngIf="formCrearOpVarios.controls['fechaInicio'].hasError('date') && (formCrearOpVarios.controls['fechaInicio'].dirty || formCrearOpVarios.controls['fechaInicio'].touched)">fecha erronea</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" >
                                        <div class="col-sm-12" style="margin-bottom: 10px;">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th class="col-sm-3">Nro de OS </th>
                                                    <th class="col-sm-3">Cantidad</th>
                                                    <th class="col-sm-3">Estado</th>
                                                    <th class="col-sm-3">Obervación</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let item of lista">
                                                    <td class="col-sm-3"><strong>{{ item?.pro_nro_orden_courier }}</strong></td>
                                                    <td class="col-sm-3">{{item?.pro_nro_docs}}</td>
                                                    <td class="col-sm-3"> 
                                                        <span *ngIf="!item.error && item.generar"><i class="btn btn-xs btn-success icon icon-check"></i></span>
                                                        <span *ngIf="item.error && !item.generar"></span>
                                                        <span *ngIf="item.error && item.generar"><i class="btn btn-xs btn-danger icon icon-close"></i></span>
                                                        <span *ngIf="!item.error && !item.generar"></span>
                                                    </td>
                                                    <td class="col-sm-3">{{item?.mensaje}}</td>          
                                                </tr>
                                                </tbody>
                                            </table>
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': (procesadosTemp*100/lista.length) + '%' }"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="ball-clip-rotate" style="height:20px;float:left;" [ngClass]="{hidden : formLoading !== true }">
                    <div></div>
                </div>
                <button [disabled]="formLoading"  form="formGenerarOPVarios" class="btn btn-primary">Generar</button>
            </div>
        </div>
    </div>
</div>
<!--</ng-template>-->


<div class="modal fade " bsModal #modalGenerarEtiqueta="bs-modal"  role="dialog" aria-labelledby="modalGenerarEtiqueta" aria-hidden="true" (onHidden)="hiddenModalGenerarEtiqueta()" [config]="{backdrop: 'static'}">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Generar Etiqueta</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalGenerarEtiqueta.hide()" [disabled]="formLoading">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
         
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <form id="formGenerarEtiqueta" class="form-horizontal" [formGroup]="formCrearEtiqueta" (submit)="submitFormGenerarEtiqueta($event, formCrearEtiqueta.value)"  >
                            

                            <div class="form-group">
                                <label class="control-label col-sm-2">Tipo Etiqueta</label>
                                <div class="col-sm-10">
                                    <ng-select            
                                                            
                                            bindLabel="tet_nombre"
                                            bindValue="tet_id"
                                            [items]="tipoEtiquetas"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            placeholder="Seleccionar Tipo Etiqueta"
                                            formControlName="tet_id" 
                                            [formControl]="formCrearEtiqueta.controls['tet_id']"
                                        >
                                    </ng-select> 
                                    <span class="text-danger" *ngIf="formCrearEtiqueta.controls['tet_id'].hasError('required') && (formCrearEtiqueta.controls['tet_id'].dirty || formCrearEtiqueta.controls['tet_id'].touched)">Tipo es obligatorio</span>
                                </div>
                            </div> 
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="ball-clip-rotate" style="height:20px;float:left;" [ngClass]="{hidden : formLoading !== true }">
                    <div></div>
                </div>
                <button [disabled]="formLoading"  form="formGenerarEtiqueta" class="btn btn-primary">Generar</button>
            </div>
        </div>
    </div>
</div>
<!--</ng-template>-->



<div class="modal fade " bsModal #modelReporte="bs-modal"  role="dialog" aria-labelledby="modelReporte" aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Reporte</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modelReporte.hide()"  [disabled]="formLoading">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="row">            
                    <div class="col-sm-12">
                        <div class="form-horizontal"> 
                            <div class="form-group">
                                <label class="control-label" class="col-sm-2">Operador</label>
                                <div class="col-sm-10">
                                    <ng-select
                                            [items]="tipoReporteExtension"
                                            [(ngModel)]="tipoReporte" #ctrl="ngModel"
                                            [multiple]="false"
                                            [closeOnSelect]="true"
                                            bindLabel="value"
                                            bindValue="value"
                                            placeholder="Seleccionar tipo"
                                        >
                                    </ng-select> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">            
                    <div class="col-sm-12">
                        <ul>
                            <li><label>Ordenes</label></li>
                            <li *ngFor="let item of lista; let i = index">
                                {{$index}} {{item.ord_id}}
                              </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" (click)="generarReporte()">Generar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade " bsModal #modalConFecha="bs-modal"  role="dialog" aria-labelledby="modalConFecha" aria-hidden="true" (onHidden)="hiddenmodalConFecha()" [config]="{backdrop: 'static'}">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Generaci&oacute;n de orden de servicio</h4>
                <button type="button" class="close pull-right" aria-label="Close" [disabled]="loading" (click)="modalConFecha.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label col-sm-12" >{{confirmaFecha}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="ball-clip-rotate" style="height:20px;float:left;" [ngClass]="{hidden : loading !== true }">
                    <div></div>
                </div>
                <button [disabled]="loading"  (click)="btnConFecha_aceptar()" class="btn btn-primary">SI</button>
                <button [disabled]="loading"  (click)="modalConFecha.hide()" class="btn btn-primary">No</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " bsModal #modalConFechaVarios="bs-modal"  role="dialog" aria-labelledby="modalConFechaVarios" aria-hidden="true" (onHidden)="hiddenmodalConFechaVarios()" [config]="{backdrop: 'static'}">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Generaci&oacute;n de orden de servicio (varios)</h4>
                <button type="button" class="close pull-right" aria-label="Close" [disabled]="loading" (click)="modalConFechaVarios.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label col-sm-12" >{{confirmaFecha}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="ball-clip-rotate" style="height:20px;float:left;" [ngClass]="{hidden : loading !== true }">
                    <div></div>
                </div>
                <button [disabled]="loading"  (click)="btnConFechaVarios_aceptar()" class="btn btn-primary">SI</button>
                <button [disabled]="loading"  (click)="modalConFechaVarios.hide()" class="btn btn-primary">No</button>
            </div>
        </div>
    </div>
</div>